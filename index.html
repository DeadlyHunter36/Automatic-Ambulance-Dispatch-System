<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LifeLink AADS</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; }
    #root { height: 100vh; display: flex; flex-direction: column; }
    .glass-effect {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    #map { width: 100%; height: 100%; border-radius: 1rem; }
  </style>

  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@19.2.3",
      "react-dom/client": "https://esm.sh/react-dom@19.2.3/client"
    }
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>

  <script type="text/babel" data-type="module">
    import React, { useEffect, useRef, useState } from 'react';
    import { createRoot } from 'react-dom/client';

    function App() {
      const mapRef = useRef(null);
      const [status, setStatus] = useState("Ready");

      // Initialize Leaflet Map
      useEffect(() => {
        if (!mapRef.current) {
          const map = L.map('map').setView([12.9716, 77.5946], 13); // Default to Bengaluru
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
          mapRef.current = map;
        }
      }, []);

      const handleRequest = () => {
        setStatus("Searching for Ambulance...");
        setTimeout(() => setStatus("Ambulance Dispatched!"), 2000);
      };

      return (
        <div className="flex flex-col h-screen">
          {/* Navbar */}
          <nav className="p-4 glass-effect border-b flex justify-between items-center sticky top-0 z-[1000]">
            <div className="flex items-center gap-2">
              <div className="w-8 h-8 bg-red-600 rounded-lg flex items-center justify-center text-white font-bold">L</div>
              <span className="font-bold text-xl tracking-tight">LifeLink</span>
            </div>
            <div className="flex gap-2">
              <button className="px-4 py-1 rounded-full bg-red-100 text-red-600 text-sm font-bold">Patient</button>
            </div>
          </nav>

          {/* Main Content */}
          <main className="flex-1 grid grid-cols-1 lg:grid-cols-3 p-4 gap-4 overflow-hidden">
            {/* Sidebar Controls */}
            <div className="lg:col-span-1 space-y-4">
              <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-200">
                <h2 className="text-2xl font-bold mb-2">Emergency Help</h2>
                <p className="text-gray-500 mb-6">Need help? Request an ambulance to your exact location with one tap.</p>
                
                <button 
                  onClick={handleRequest}
                  className="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-4 rounded-xl shadow-lg shadow-red-200 transition-all flex items-center justify-center gap-2"
                >
                  <span className="text-xl">üöë</span> {status}
                </button>

                <div className="mt-6 space-y-3">
                    <div className="p-3 bg-blue-50 rounded-lg border border-blue-100 flex gap-3">
                        <span className="text-blue-500">‚ÑπÔ∏è</span>
                        <p className="text-sm text-blue-700 font-medium">Your location is being shared with nearby responders.</p>
                    </div>
                </div>
              </div>
            </div>

            {/* Map Container */}
            <div className="lg:col-span-2 relative bg-gray-200 rounded-2xl overflow-hidden shadow-inner border border-gray-300">
              <div id="map"></div>
            </div>
          </main>
        </div>
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
