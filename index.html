<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LifeLink AADS</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <style>
    body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
    #root { height: 100vh; display: flex; flex-direction: column; }
    .glass-effect {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    #map { width: 100%; height: 100%; min-height: 400px; border-radius: 1rem; z-index: 1; }
    
    @keyframes pulse {
      0% { transform: scale(1); opacity: 1; }
      50% { transform: scale(1.1); opacity: 0.7; }
      100% { transform: scale(1); opacity: 1; }
    }
    .pulse-dot { animation: pulse 2s infinite; }
  </style>

  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@19.2.3",
      "react-dom/client": "https://esm.sh/react-dom@19.2.3/client"
    }
  }
  </script>
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>

  <script type="text/babel" data-type="module">
    import React, { useEffect, useRef, useState } from 'react';
    import { createRoot } from 'react-dom/client';

    function App() {
      const mapRef = useRef(null);
      const [isRequesting, setIsRequesting] = useState(false);

      useEffect(() => {
        if (!mapRef.current) {
          const map = L.map('map').setView([12.9716, 77.5946], 13);
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
          mapRef.current = map;
        }
      }, []);

      return (
        <div className="flex flex-col h-screen overflow-hidden">
          {/* Header Section */}
          <nav className="p-4 bg-white border-b flex justify-between items-center z-10">
            <div className="flex items-center gap-3">
              <div className="bg-red-600 p-2 rounded-lg text-white font-bold">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="3"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
              </div>
              <div>
                <h1 className="text-xl font-bold leading-tight">LifeLink</h1>
                <p className="text-[10px] uppercase tracking-widest text-gray-400 font-bold">Rescue Coordination</p>
              </div>
            </div>
            
            <div className="flex gap-2">
              <button className="px-4 py-1.5 rounded-full bg-red-50 text-red-600 text-xs font-bold border border-red-100">Patient</button>
              <button className="px-4 py-1.5 rounded-full text-gray-400 text-xs font-medium hover:bg-gray-100">Admin</button>
              <button className="px-4 py-1.5 rounded-full text-gray-400 text-xs font-medium hover:bg-gray-100">Driver</button>
            </div>
          </nav>

          <div className="flex-1 flex flex-col md:flex-row overflow-hidden">
            {/* Left Sidebar - 1/3 width */}
            <div className="w-full md:w-1/3 p-6 bg-white border-r overflow-y-auto">
              <h2 className="text-2xl font-bold mb-1">Emergency Help</h2>
              <p className="text-gray-500 mb-8 text-sm">Request an immediate ambulance to your current location.</p>
              
              <button 
                onClick={() => setIsRequesting(true)}
                className={`w-full py-4 rounded-xl font-bold flex items-center justify-center gap-3 transition-all active:scale-95 shadow-lg shadow-red-100 mb-8 ${isRequesting ? 'bg-gray-100 text-gray-400' : 'bg-red-600 text-white hover:bg-red-700'}`}
              >
                <span className="text-xl">üìç</span> {isRequesting ? 'REQUEST SENT' : 'REQUEST AMBULANCE'}
              </button>

              <div className="bg-gray-50 border border-gray-100 rounded-2xl p-6">
                <h3 className="font-bold text-sm mb-4">Safety Instructions:</h3>
                <ul className="space-y-4 text-sm text-gray-600">
                  <li className="flex gap-3">
                    <span className="w-2 h-2 rounded-full bg-red-400 mt-1.5"></span>
                    <span>Stay where you are and remain calm.</span>
                  </li>
                  <li className="flex gap-3">
                    <span className="w-2 h-2 rounded-full bg-red-400 mt-1.5"></span>
                    <span>Keep your phone line clear for the dispatcher.</span>
                  </li>
                  <li className="flex gap-3">
                    <span className="w-2 h-2 rounded-full bg-red-400 mt-1.5"></span>
                    <span>Prepare any medical history or current medications.</span>
                  </li>
                </ul>
              </div>
            </div>

            {/* Right Map View - 2/3 width */}
            <div className="flex-1 p-6 relative bg-gray-50 flex flex-col">
              <div className="flex justify-end mb-4 absolute top-10 right-10 z-10">
                <div className="glass-effect px-4 py-2 rounded-full border border-white flex items-center gap-2 shadow-sm">
                  <div className="w-2 h-2 bg-red-500 rounded-full pulse-dot"></div>
                  <span className="text-[10px] font-black uppercase tracking-tighter">Active Emergencies: 0</span>
                </div>
              </div>
              
              <div className="flex-1 relative">
                <div id="map"></div>
                {!mapRef.current && (
                   <div className="absolute inset-0 flex items-center justify-center bg-gray-200 rounded-2xl border-2 border-dashed border-gray-300">
                      <p className="text-gray-400 font-medium">Loading Live Map...</p>
                   </div>
                )}
              </div>
            </div>
          </div>
        </div>
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
